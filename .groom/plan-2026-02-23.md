# Grooming Plan — 2026-02-23

## Themes Explored

- **A: Security** — Shell injection vectors in action.yml → create issue #93
- **B: DX / Error Clarity** — LLM config mismatch (#88 enriched), LLM parse errors (#95), preflight tagFormat (#90 enriched), timeout bug (#94)
- **C: Documentation** — Troubleshooting, setup checklist, onboarding (#96)
- **D: LLM Quality** — Audience template differentiation (#97), semantic validation (#98)

## Issues Created

| # | Title | Score | Priority |
|---|-------|-------|----------|
| #93 | Fix shell injection vectors in action.yml | 85/100 | P1/now |
| #94 | Fix missing HTTP timeout in report-synthesis-failure.py | 80/100 | P1/now |
| #95 | Log full LLM response body on synthesis parse failure | 85/100 | P1/now |
| #96 | Add Troubleshooting section and first-time setup guide | 80/100 | P2/next |
| #97 | Strengthen audience variant templates | 85/100 | P2/next |
| #98 | Add benefit-framing/jargon checks to synthesis validation | 80/100 | P2/later |

## Issues Enriched

| # | Changes |
|---|---------|
| #88 | Added p1/now/effort/m labels, milestone, full acceptance criteria, affected files, verification, approach with mermaid |
| #90 | Added p2/next/effort/s labels, milestone, full acceptance criteria, affected files, approach with mermaid |

## Context Artifacts Created

- `project.md` — migrated from vision.md (deleted); added domain glossary, quality bar, code patterns, lessons learned
- `vision.md` — deleted (content fully migrated)
- `.groom/plan-2026-02-23.md` — this file

## Research Findings

### Security
- ~24 direct `${{ inputs.* }}` interpolations in action.yml run: blocks
- Secure pattern exists in `semantic_release` and `resolve_release` steps — copy it everywhere else
- LOW exploitability (inputs come from workflow files, not user input) but HIGH principle violation

### DX
- Root cause of LLM misconfiguration: healthcheck defaults to `false`, so synthesis fails after release is published
- Error message "did not include choices[0].message.content" swallows actual provider error body
- report-synthesis-failure.py passes `timeout` param to function signature but never to HTTP call

### LLM Quality
- Root cause of mediocre notes: vague input data (commit messages)
- Secondary: audience templates are ~90% identical (only 3-6 lines of prose differ)
- Validation is structural only — passes "Fixed issue" with no benefit framing
- Retry logic appends feedback to same template — doesn't fix weak input

### Onboarding
- Top blockers: conventional commits not explained, CI trigger `workflows: [CI]` name not called out, synthesis-failure-issue default mismatch in README
- Minimum viable config is just `github-token` + `llm-api-key` (but not documented clearly)

## Recommended Execution Order

1. #94 (timeout bug) — 30 min, low risk, test-driven
2. #95 (LLM error diagnostics) — 1 hr, improves debuggability for all other DX work
3. #88 (healthcheck auto-enable) — 2 hrs, highest user impact
4. #93 (shell injection) — 3 hrs, mechanical but important
5. #96 (README troubleshooting) — 2 hrs, docs
6. #97 (audience templates) — 2 hrs, LLM quality
7. #90 (tagFormat preflight) — 1 hr, edge case
8. #98 (semantic validation) — deferred to later sprint

Ready for /autopilot: #94, #95, #93

## Tune-Repo Status

- No `.glance.md` files exist
- No `AGENTS.md` file exists
- Recommend running `/tune-repo` to generate these artifacts before next session
